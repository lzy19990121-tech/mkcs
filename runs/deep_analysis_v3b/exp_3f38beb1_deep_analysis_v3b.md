╔════════════════════════════════════════════════════════════════╗
║         SPL-3b 深度风险分析报告                                    ║
║         深度扰动测试 + 结构分析 + 风险包络 + 可执行规则           ║
╚════════════════════════════════════════════════════════════════╝
**生成时间**: 2026-02-01 00:16:42
**策略ID**: unknown
**运行ID**: exp_3f38beb1
**回测期间**: 2024-01-01 至 2024-01-31
**总收益**: 0.44%

**可追溯性**:
- Git Commit: 0232e5c9
- Config Hash: cfg_3f38beb1

---


================================================================================

# 20d 窗口 - 深度风险分析

================================================================================


## 一、Worst-Case 稳定性检验（扰动测试）

**稳定性标签**: Stable


### 扰动测试详情

| 扰动类型 | 扰动值 | 原始收益 | 扰动后收益 | 差异 | 同一窗口 | 在Top-K |
|----------|--------|----------|------------|------|----------|---------|
| replay_order | +0.0% | 4.15% | 4.15% | +0.00% | ✓ | ✓ |
| cost_epsilon | +1.0% | 4.15% | 4.19% | +0.04% | ✓ | ✓ |
| cost_epsilon | -1.0% | 4.15% | 4.11% | -0.04% | ✓ | ✓ |
| capital_epsilon | +1.0% | 4.15% | 4.11% | -0.04% | ✓ | ✓ |
| capital_epsilon | -1.0% | 4.15% | 4.19% | +0.04% | ✓ | ✓ |

### 判断标准

- **Stable**: 扰动后最坏窗口仍在同一时间区间（±2天）
- **Weakly Stable**: 扰动后最坏窗口在原始Top-K中
- **Fragile**: 扰动后最坏窗口不在Top-K中

## 二、Worst-Case 结构确认

**风险类型**: 结构性风险 (Structural Risk Pattern)


### 形态指标

| 指标 | 数值 | 说明 |
|------|------|------|
| 平均MDD | 0.49% | Top-K平均 |
| MDD标准差 | 0.00% | |
| MDD变异系数 | 0.000 | <0.3为稳定 |
| 形态相似度 | 0.897 | >0.7为高度相似 |
| 回撤曲线相关性 | 1.000 | |
| 形态一致性 | 1.000 | |

### Top-K 最坏窗口

| 排名 | 窗口ID | 收益 | MDD | 回撤形态 |
|------|--------|------|-----|----------|
| 1 | exp_3f38beb1_20d_0 |    4.15% |   0.5% | fast_recovery |
| 2 | exp_3f38beb1_20d_1 |    4.59% |   0.5% | fast_recovery |
## 三、Worst-Case Envelope（风险边界）

## 风险包络 - unknown (20d)

**样本数**: 6
**扰动类型**: replay_order, cost_epsilon, cost_epsilon, capital_epsilon, capital_epsilon
**置信水平**: 95%

### Worst-Case Return 分位数
| 分位数 | 数值 | 说明 |
|--------|------|------|
| P50    |    4.15% | 中位数 |
| P75    |    4.18% | |
| P90    |    4.19% | |
| P95    |    4.19% | 95%置信边界 |
| P99    |    4.19% | 99%置信边界 |
| 原始值 |    4.15% | 未扰动 |

### Worst-Case MDD 分位数
| 分位数 | 数值 | 说明 |
|--------|------|------|
| P50    |   0.49% | 中位数 |
| P75    |   0.49% | |
| P90    |   0.49% | |
| P95    |   0.49% | 95%置信边界 |
| P99    |   0.49% | 99%置信边界 |
| 原始值 |   0.49% | 未扰动 |

### 回撤持续时间 分位数
| 分位数 | 天数 | 说明 |
|--------|------|------|
| P50    |   3.0 | 中位数 |
| P75    |   3.0 | |
| P90    |   3.0 | |
| P95    |   3.0 | 95%置信边界 |
| P99    |   3.0 | 99%置信边界 |
| 原始值 |   3.0 | 未扰动 |

## 四、可执行风险规则

## 可执行风险规则 - unknown

**规则总数**: 1

### 禁用规则 (Disable)

#### 规则 #1: 结构性风险禁用

- **规则ID**: unknown_regime_disable
- **适用范围**: regime
- **触发条件**: `market_regime < 0.0`
- **风险类型**: 结构性风险
- **证据来源**: 结构分析
- **证据数值**: 0.8969639725098819

**描述**: 策略表现出结构性风险（形态相似度0.90）。Top-K最坏窗口高度相似，建议在震荡市场（ADX < 25）时禁用该策略。

**伪代码**:
```python
if market_regime < 0.0:
    # 执行相应动作
    disable_strategy()
```


================================================================================

# 60d 窗口 - 深度风险分析

================================================================================


## 一、Worst-Case 稳定性检验（扰动测试）

**稳定性标签**: Unknown


### 扰动测试详情

| 扰动类型 | 扰动值 | 原始收益 | 扰动后收益 | 差异 | 同一窗口 | 在Top-K |
|----------|--------|----------|------------|------|----------|---------|

### 判断标准

- **Stable**: 扰动后最坏窗口仍在同一时间区间（±2天）
- **Weakly Stable**: 扰动后最坏窗口在原始Top-K中
- **Fragile**: 扰动后最坏窗口不在Top-K中

## 二、Worst-Case 结构确认

**风险类型**: 单一异常 (Single-Outlier Risk)


### 形态指标

| 指标 | 数值 | 说明 |
|------|------|------|
| 平均MDD | nan% | Top-K平均 |
| MDD标准差 | nan% | |
| MDD变异系数 | 0.000 | <0.3为稳定 |
| 形态相似度 | 0.000 | >0.7为高度相似 |
| 回撤曲线相关性 | 0.000 | |
| 形态一致性 | 0.000 | |

### Top-K 最坏窗口

| 排名 | 窗口ID | 收益 | MDD | 回撤形态 |
|------|--------|------|-----|----------|
## 三、Worst-Case Envelope（风险边界）

## 风险包络 - unknown (60d)

**样本数**: 1
**扰动类型**: 
**置信水平**: 95%

### Worst-Case Return 分位数
| 分位数 | 数值 | 说明 |
|--------|------|------|
| P50    |    0.00% | 中位数 |
| P75    |    0.00% | |
| P90    |    0.00% | |
| P95    |    0.00% | 95%置信边界 |
| P99    |    0.00% | 99%置信边界 |
| 原始值 |    0.00% | 未扰动 |

### Worst-Case MDD 分位数
| 分位数 | 数值 | 说明 |
|--------|------|------|
| P50    |   0.00% | 中位数 |
| P75    |   0.00% | |
| P90    |   0.00% | |
| P95    |   0.00% | 95%置信边界 |
| P99    |   0.00% | 99%置信边界 |
| 原始值 |   0.00% | 未扰动 |

### 回撤持续时间 分位数
| 分位数 | 天数 | 说明 |
|--------|------|------|
| P50    |   0.0 | 中位数 |
| P75    |   0.0 | |
| P90    |   0.0 | |
| P95    |   0.0 | 95%置信边界 |
| P99    |   0.0 | 99%置信边界 |
| 原始值 |   0.0 | 未扰动 |

## 四、可执行风险规则

## 可执行风险规则 - unknown

无风险规则（策略表现良好）

## 五、综合结论

### 稳定性总评

| 窗口长度 | 稳定性标签 | 风险类型 | 规则数量 |
|----------|------------|----------|----------|
| 20d | Stable | structural | 1 |
| 60d | Unknown | single_outlier | 0 |

### 适用性评估

⚠️ **策略存在一定风险，建议启用部分风控规则**


---

## 六、元数据与可复现性

### 分析配置

- 扰动类型数: 5
- 分析窗口: 0.0 ε
- 置信水平: 95%

### 可复现性审计

本报告可完全复现：

```bash
# 检出代码版本
git checkout 0232e5c9

# 使用相同配置
python -c "
from analysis import DeepAnalysisReportGenerator, load_replay_outputs
replays = load_replay_outputs('runs')
replay = [r for r in replays if r.run_id == 'exp_3f38beb1'][0]
generator = DeepAnalysisReportGenerator()
report = generator.generate_full_report(replay)
print(report)
"
```

---

*本报告由 MKCS SPL-3b 深度风险分析系统自动生成*
